<html xmlns:th="https://www.thymeleaf.org/">
<head>
<link rel="stylesheet"
	href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css">
<link rel="stylesheet" th:href="@{/css/styles.css}">
</head>
<body>
	<div th:insert="fragments/commonui :: userhead"></div>
	<div th:insert="fragments/commonui :: usermenu"></div>
	<div class="container">
		<div class="card-header">
			<h3 style="font-family: Lucida Console, Courier New, monospace;color:White;">SELCET PARTS HERE</h3>
		</div>
		<div class="card-body">

			<table class="table" style="font-family: Lucida Console, Courier New, monospace;color:White;">
				<tr>
					<th>ORDER CODE</th>
					<th><input th:field="*{po.purchaseCode}" readonly="readonly"
						class="form-control"></th>
					<th>STATUS</th>
					<th><input th:field="*{po.poStatus}" readonly="readonly"
						class="form-control"></th>
				</tr>
			</table>
			<hr />
			
			<div th:if="${po.poStatus == 'OPEN' || po.poStatus == 'PICKING'}">
			<h3 style="font-family: Lucida Console, Courier New, monospace;color:White;">ADD PARTS TO CART</h3>
			<form th:action="@{/purchaseOrder/addPart}" method="POST" th:object="${purchaseDtl}">
			<input type="hidden" th:field="*{po.id}">
				<div class="row">
					<div class="col-2">
						<label style="font-family: Lucida Console, Courier New, monospace;color:White;"> SELECT PART</label>
					</div>
					<div class="col-2">
						<Select th:field="*{part.id}" class="form-control">
							<option value="">--SELECT--</option>
							<option th:each="ob:${parts}" th:value="${ob.key}"
								th:text="${ob.value}" ></option>
						</Select>
					</div>
				
				
					<div class="col-1">
						<label style="font-family: Lucida Console, Courier New, monospace;color:White;">QTY</label>
					</div>
					<div class="col-1">
						<input type="text" th:field="*{qty}" class="form-control">
					</div>
				
				
					<div class="col-1"></div>
					<div class="col-2">
						<input type="submit" value="ADD"  class="btn btn-success"/>
					</div>
					</div>
				
			</form>
			</div>
			
		</div>
		<div class="card-footer">
			<table class="table" style="font-family: Lucida Console, Courier New, monospace;color:White;">
			 <tr>
			   <th>SLNO</th>
			   <th>PART CODE</th>
			   <th>BASE COST</th>
			   <th>QTY</th>
			   <th th:if="${po.poStatus == 'PICKING'}">OPERATION</th>
			 </tr>
			 <tr th:each="ob,i:${dtlList}">
			  <td th:text="${i.count}"></td>
			  <td th:text="${ob.part.partCode}"></td>
			  <td th:text="${ob.part.partCost}"></td>
			  <td th:text="${ob.qty}"></td>
			  <td th:if="${po.poStatus == 'PICKING'}"><a th:href="@{/purchaseOrder/removePart?dtlId={id}&poId={poId}(id=${ob.id},poId=${po.id})}" class="btn btn-danger">REMOVE</a>
			  </td>
			  </tr>
			</table>
			<div th:if="${po.poStatus == 'PICKING'}" align="center">
			<a th:href="@{/purchaseOrder/confirmOrder/{id}(id=${po.id})}" class="btn btn-success" >CONFIRM</a>
			</div>
			<div th:if="${po.poStatus == 'ORDERED'}" align="center">
			 <b>TOTAL ITEM PLACED IN ORDER :<span th:text="${dtlList.size()}"></span></b>
			</div>
		</div>
	</div>

</body>
</html>