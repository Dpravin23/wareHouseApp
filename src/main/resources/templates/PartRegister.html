<html xmlns:th="https://www.thymeleaf.org/">

<head>
	 <link rel="stylesheet" th:href="@{/css/styles.css}">
</head>

<body>
<div th:insert="fragments/commonui :: userhead"></div>
<div th:insert="fragments/commonui :: usermenu"> </div>

	<div class="container">
		
			<div class="card-header">
				<h3 style="font-family: Lucida Console, Courier New, monospace;color:White;"> Part Register</h3>
			</div>
			<div class="card">
			<div class="card-body">
				<form th:action="@{/part/save}" method="POST" th:object="${part}" id="partForm">
					<!--  ---ROW1--- -->
					<div class="row">
						<div class="col-2">
							<label for="">Part Code</label>
						</div>
						<div class="col-2">
						<input type="text" name="partCode" id="partCode" th:field="*{partCode}"/>	
						</div>
						<div class="col-2">
							<span id="partCodeErr"></span>
						</div>
					</div>
					<div class="row">
						<div class="col-2">
							<label for="partLen">Part Length</label>
						</div>
						<div class="col-2">
							<input type="text" name="partLen" id="partLen" th:field="*{partLen}"
								class="form-control">
						</div>
						<div class="col-2">
							<span id="partLenErr"></span>
						</div>
					</div>

					<!--  ---ROW2--- -->
					<div class="row">
						<div class="col-2">
							<label for="partWidth">Part Width</label>
						</div>
						<div class="col-2">
							<input type="text" name="partWidth" id="partWidth" th:field="*{partWidth}"
								class="form-control">
						</div>
						<div class="col-2">
							<span id="partWidthErr"></span>
						</div>
					</div>
                    <div class="row">
						<div class="col-2">
							<label for="partHgh">Part Height</label>
						</div>
						<div class="col-2">
							<input type="text" name="partHgh" id="partHgh" th:field="*{partHgh}"
								class="form-control">
						</div>
						<div class="col-2">
							<span id="partHghErr"></span>
						</div>
					</div>
					  <div class="row">
						<div class="col-2">
							<label >UOM</label>
						</div>
						<div class="col-2">
							<select th:field="*{uomType.id}"  class="form-control">
							 <option value="">--Select--</option>
							 <option th:each="u:${uoms}" th:value="${u.key}" th:text="${u.value}"></option>
							</select>
						</div>
						<div class="col-2">
							<span id="uom"></span>
						</div>
					</div>
				
					<div class="row">
						<div class="col-2">
							<label for="baseCost">Base Cost</label>
						</div>
						<div class="col-2">
							<input type="text" name="baseCost" id="baseCost" th:field="*{partCost}"
								class="form-control">
						</div>
						<div class="col-2">
							<span id="baseCostErr"></span>
						</div>
					</div>
					<!--  ---ROW3--- -->
					<div class="row">
						<div class="col-2">
							<label for="baseCurr">Base Currency </label>
						</div>
						<div class="col-2">
							<select th:field="*{baseCurr}" name="baseCurr" id="baseCurr" class="form-control">
								<option value="">--Select--</option>
								<option value="INR">INR</option>
								<option value="USD">USD</option>
							</select>
						</div>
						<div class="col-2">
							<span id="baseCurrErr"></span>
						</div>
					</div>
					<div class="row">
						<div class="col-2">
							<label for="partDesc">Part Description</label>
						</div>
						<div class="col-2">
							<textarea  name="partDesc" id="partDesc" th:field="*{partDesc}"
								class="form-control"></textarea>
						</div>
						<div class="col-2">
							<span id="partDescErr"></span>
						</div>
					</div>

					<input type="submit" class="btn btn-success btn-center" value="Create Part" />
				</form>
			</div>
		</div>

	</div>
			<!-- card footer section -->
			<div th:if="${message} !=null">
				<div class="card-footer bg-info text-white text-center">
					<span th:text="${message}"></span>
				</div>
			</div>
	<script>
		$(document).ready(function () {
			//1.hide error section
			$("#partCodeErr").hide();
			
			$("#descriptionErr").hide();
			$("#uomModeErr").hide();

			//2.define error flag and assign with false
			var uomModelErr = false;
			var descriptionErr = false;
			var uomModeErr = false;

			//3.link input with event
			$("#uomModel").keyup(function () {
				validate_uomModel();
			});

			$("#description").keyup(function () {
				validate_description();
			});
			$("#uomMode").click(function () {
				$("#uomModeErr").hide();
			});



			//4.define fun for data validation
			function validate_uomModel() {
				//read text input 

				var val = $("#uomModel").val();
				if (val == '') {
					$("#uomModelErr").show();

					$("#uomModelErr").html("enter <b> UOM MODEL<b>");

					$("#uomModelErr").css('color', 'red');


					uomModelErr = false;
				} else {
					$("#uomModelErr").hide();
					uomModelErr = true;
				}
				return uomModelErr;
			}
			function validate_description() {

				var val = $("#description").val();
				if (val == '') {
					$("#descriptionErr").show();

					$("#descriptionErr").html("enter <b> Descripion<b>");

					$("#descriptionErr").css('color', 'red');
					descriptionErr = false;
				} else {
					$("#descriptionErr").hide();
					descriptionErr = true;
				}
				return descriptionErr;
			}

			function validate_uomMode() {
				var val = $("#uomMode option:selected").val();
				if (val == '') {
					$("#uomModeErr").show();

					$("#uomModeErr").html("select  <b> UOM Mode<b>");

					$("#uomModeErr").css('color', 'red');
					uomModeErr = false;
				} else {
					$("#uomModeErr").hide();
					uomModeErr = true;
				}
				return uomModeErr;
			}
			//form submit
			$("#uomForm").submit(function () {
				validate_uomModel();
				validate_uomMode();
				validate_description();
				if (uomModelErr && descriptionErr && uomModeErr)
					return true;//valid data
				else
					return false;//invalid data

			});

		});


	</script>
</body>

</html>